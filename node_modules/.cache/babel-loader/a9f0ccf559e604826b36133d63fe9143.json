{"ast":null,"code":"export const ADD_PRODUCT_SUCCESS = 'ADD_PRODUCT_SUCCESS';\nexport const DELETE_PRODUCT_SUCCESS = 'DELETE_PRODUCT_SUCCESS';\nexport const UPDATE_PRODUCT_SUCCESS = 'UPDATE_PRODUCT_SUCCESS';\nexport const GET_PRODUCT_SUCCESS = 'UPDATE_PRODUCT_SUCCESS';\nexport const REMOVE_CATEGORY_SUCCESS = 'REMOVE_CATEGORY_SUCCESS';\nexport const START_PRODUCT_ACTION = 'START_PRODUCT_ACTION';\nexport const ERROR = 'ERROR';\nexport const createProduct = product => {\n  return (dispatch, getState, _ref) => {\n    let {\n      getFirestore\n    } = _ref;\n    dispatch({\n      type: START_PRODUCT_ACTION\n    });\n    const firestore = getFirestore();\n    const userId = getState().firebase.auth.uid;\n    return firestore.collection('products').add({ ...product,\n      userId,\n      createdAt: new Date()\n    }).then(() => {\n      dispatch({\n        type: ADD_PRODUCT_SUCCESS\n      });\n      return true;\n    }).catch(err => {\n      dispatch({\n        type: ERROR,\n        payload: err.message\n      });\n    });\n  };\n};\nexport const removeProduct = id => {\n  return (dispatch, getState, _ref2) => {\n    let {\n      getFirestore\n    } = _ref2;\n    dispatch({\n      type: START_PRODUCT_ACTION\n    });\n    const firestore = getFirestore();\n    return firestore.collection('products').doc(id).delete().then(() => {\n      dispatch({\n        type: DELETE_PRODUCT_SUCCESS\n      });\n      return true;\n    }).catch(err => {\n      dispatch({\n        type: ERROR,\n        payload: err.message\n      });\n    });\n  };\n};\nexport const updateProduct = (id, product) => {\n  return (dispatch, getState, _ref3) => {\n    let {\n      getFirestore\n    } = _ref3;\n    dispatch({\n      type: START_PRODUCT_ACTION\n    });\n    const firestore = getFirestore();\n    return firestore.collection('products').doc(id).set({ ...product\n    }).then(() => {\n      dispatch({\n        type: UPDATE_PRODUCT_SUCCESS\n      });\n      return true;\n    }).catch(err => {\n      dispatch({\n        type: ERROR,\n        payload: err.message\n      });\n    });\n  };\n};\nexport const removeCategory = category => {\n  return (dispatch, getState, _ref4) => {\n    let {\n      getFirestore\n    } = _ref4;\n    dispatch({\n      type: START_PRODUCT_ACTION\n    });\n    const firestore = getFirestore();\n    return firestore.collection('products').where('category', '==', category).get().then(querySnapshot => {\n      let batch = firestore.batch();\n      querySnapshot.forEach(doc => {\n        batch.delete(doc.ref);\n      });\n      return batch.commit();\n    }).then(() => {\n      dispatch({\n        type: REMOVE_CATEGORY_SUCCESS\n      });\n      return true;\n    }).catch(err => {\n      dispatch({\n        type: ERROR,\n        payload: err.message\n      });\n    });\n  };\n};","map":{"version":3,"names":["ADD_PRODUCT_SUCCESS","DELETE_PRODUCT_SUCCESS","UPDATE_PRODUCT_SUCCESS","GET_PRODUCT_SUCCESS","REMOVE_CATEGORY_SUCCESS","START_PRODUCT_ACTION","ERROR","createProduct","product","dispatch","getState","getFirestore","type","firestore","userId","firebase","auth","uid","collection","add","createdAt","Date","then","catch","err","payload","message","removeProduct","id","doc","delete","updateProduct","set","removeCategory","category","where","get","querySnapshot","batch","forEach","ref","commit"],"sources":["/Users/suryasama/Documents/Wirelessplus-Backup/Inventory Management-27-08-2022/src/actions/product.js"],"sourcesContent":["export const ADD_PRODUCT_SUCCESS = 'ADD_PRODUCT_SUCCESS';\nexport const DELETE_PRODUCT_SUCCESS = 'DELETE_PRODUCT_SUCCESS';\nexport const UPDATE_PRODUCT_SUCCESS = 'UPDATE_PRODUCT_SUCCESS';\nexport const GET_PRODUCT_SUCCESS = 'UPDATE_PRODUCT_SUCCESS';\nexport const REMOVE_CATEGORY_SUCCESS = 'REMOVE_CATEGORY_SUCCESS';\nexport const START_PRODUCT_ACTION = 'START_PRODUCT_ACTION';\n\nexport const ERROR = 'ERROR';\n\nexport const createProduct = product => {\n  return (dispatch, getState, { getFirestore }) => {\n    dispatch({ type: START_PRODUCT_ACTION });\n    const firestore = getFirestore();\n    const userId = getState().firebase.auth.uid;\n    return firestore\n      .collection('products')\n      .add({\n        ...product,\n        userId,\n        createdAt: new Date(),\n      })\n      .then(() => {\n        dispatch({ type: ADD_PRODUCT_SUCCESS });\n        return true;\n      })\n      .catch(err => {\n        dispatch({ type: ERROR, payload: err.message });\n      });\n  };\n};\n\nexport const removeProduct = id => {\n  return (dispatch, getState, { getFirestore }) => {\n    dispatch({ type: START_PRODUCT_ACTION });\n    const firestore = getFirestore();\n    return firestore\n      .collection('products')\n      .doc(id)\n      .delete()\n      .then(() => {\n        dispatch({ type: DELETE_PRODUCT_SUCCESS });\n        return true;\n      })\n      .catch(err => {\n        dispatch({ type: ERROR, payload: err.message });\n      });\n  };\n};\n\nexport const updateProduct = (id, product) => {\n  return (dispatch, getState, { getFirestore }) => {\n    dispatch({ type: START_PRODUCT_ACTION });\n    const firestore = getFirestore();\n    return firestore\n      .collection('products')\n      .doc(id)\n      .set({\n        ...product,\n      })\n      .then(() => {\n        dispatch({ type: UPDATE_PRODUCT_SUCCESS });\n        return true;\n      })\n      .catch(err => {\n        dispatch({ type: ERROR, payload: err.message });\n      });\n  };\n};\n\nexport const removeCategory = category => {\n  return (dispatch, getState, { getFirestore }) => {\n    dispatch({ type: START_PRODUCT_ACTION });\n    const firestore = getFirestore();\n    return firestore\n      .collection('products')\n      .where('category', '==', category)\n      .get()\n      .then(querySnapshot => {\n        let batch = firestore.batch();\n        querySnapshot.forEach(doc => {\n          batch.delete(doc.ref);\n        });\n        return batch.commit();\n      })\n      .then(() => {\n        dispatch({ type: REMOVE_CATEGORY_SUCCESS });\n        return true;\n      })\n      .catch(err => {\n        dispatch({ type: ERROR, payload: err.message });\n      });\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}